---
// Définition de l'interface pour les propriétés du projet
type StatusType = "completed" | "in-progress" | "not-started";

interface Props {
  id: string;
  slug: string;
  title: string;
  description: string;
  image: string;
  tags: string[];
  status?: StatusType;
}

// Récupération des propriétés
const {
  id,
  slug,
  title,
  description,
  image,
  tags,
  status = "not-started", // Valeur par défaut
} = Astro.props;

// Configuration des couleurs et textes selon le statut
const statusConfig = {
  completed: {
    text: "Terminé",
    bgColor: "bg-green-100 dark:bg-green-900",
    textColor: "text-green-800 dark:text-green-200",
  },
  "in-progress": {
    text: "En cours",
    bgColor: "bg-yellow-100 dark:bg-yellow-900",
    textColor: "text-yellow-800 dark:text-yellow-200",
  },
  "not-started": {
    text: "Pas commencé",
    bgColor: "bg-gray-100 dark:bg-gray-700",
    textColor: "text-gray-800 dark:text-gray-300",
  },
};

const statusStyle = statusConfig[status];
---

<div
  class="bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow relative"
>
  <!-- Badge de statut -->
  <div
    class={`absolute top-4 right-4 px-3 py-1 rounded-full ${statusStyle.bgColor} ${statusStyle.textColor} text-sm font-medium`}
  >
    {statusStyle.text}
  </div>

  <img src={image} alt={title} class="w-full h-56 object-cover" />
  <div class="p-6">
    <h3 class="text-xl font-semibold mb-2 text-gray-900 dark:text-white">
      {title}
    </h3>
    <p class="text-gray-700 dark:text-gray-300 mb-4">
      {description}
    </p>
    <div class="flex flex-wrap gap-2 mb-4">
      {
        tags.map((tag) => (
          <span class="px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-sm rounded-full">
            {tag}
          </span>
        ))
      }
    </div>
    <a
      href={`/projet/${slug}`}
      class="inline-block px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors"
    >
      Voir le projet
    </a>
  </div>
</div>
